(this["webpackJsonptime-table"]=this["webpackJsonptime-table"]||[]).push([[0],{33:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){"use strict";a.r(t);var s=a(1),i=a(5),n=a.n(i),r=a(22),l=a.n(r),c=(a(33),a(11)),d=a(23),o=a(24),b=a(4),h=a(27),j=a(26),m=a(7),u=a.n(m),p=a(3),g=a(12),x=a(0),f=a(25),O=a.n(f),v=(a(59),function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(e){var s;return Object(d.a)(this,a),(s=t.call(this,e)).state={contents:[],isLoading:!1,errors:null,sleepCheck:!1},s.idleCount=0,s.runSleep=!1,s.sleepReady=!1,s.timedSync=null,s.minuteCheck=null,s.getLineData=s.getLineData.bind(Object(b.a)(s)),s.timeSyncData=s.timeSyncData.bind(Object(b.a)(s)),s.syncData=s.syncData.bind(Object(b.a)(s)),s.syncDataSleep=s.syncDataSleep.bind(Object(b.a)(s)),s.wakeUp=s.wakeUp.bind(Object(b.a)(s)),s.refreshBrowser=s.refreshBrowser.bind(Object(b.a)(s)),s.refreshTime=s.refreshTime.bind(Object(b.a)(s)),s.refreshDate="Senast synkad: "+String((new Date).getDate()).padStart(2,"0")+"/"+String((new Date).getMonth()+1).padStart(2,"0")+" kl. "+(new Date).getHours()+":"+((new Date).getMinutes()<10?"0":"")+(new Date).getMinutes(),s.refreshTl=g.a.timeline({paused:!0}),s.sleepIconTl=null,s}return Object(o.a)(a,[{key:"syncData",value:function(){this.refreshIcon=document.getElementById("ttable-refresh"),this.refreshTl.to(this.refreshIcon,1,{rotation:360,ease:x.b.easeInOut}).to(this.refreshIcon,.3,{scale:.8},"-=0.70").to(this.refreshIcon,.2,{scale:1},"-=0.3"),this.refreshTl.restart(),this.refreshTime(),this.getLineData()}},{key:"syncDataSleep",value:function(){this.refreshTime(),this.getLineData()}},{key:"refreshTime",value:function(){var e="Senast synkad: "+String((new Date).getDate()).padStart(2,"0")+"/"+String((new Date).getMonth()+1).padStart(2,"0")+" kl. "+((new Date).getHours()<10?"0":"")+(new Date).getHours()+":"+((new Date).getMinutes()<10?"0":"")+(new Date).getMinutes();document.getElementById("ttable-refresh-info").innerHTML=e,this.idleCount=0}},{key:"getLineData",value:function(){var e=this;this.refreshTime();var t=u.a.get("https://api.sl.se/api2/realtimedeparturesV4.json?key=ffbcc90766d24470a6c1bf7226f3bbfd&siteid=9104&timewindow=60&bus=false&tram=false&EnablePrediction=false"),a=u.a.get("https://api.sl.se/api2/deviations.json?key=72fe12ec0cc84395a02e6f8cd199d307&transportMode=metro&siteId=9104");Promise.all([t,a]).then(u.a.spread((function(e,t){return[].concat(Object(c.a)(e.data.ResponseData.Metros),Object(c.a)(t.data.ResponseData)).map((function(e){return{direction:"".concat(e.JourneyDirection),destination:"".concat(e.Destination),arrival:"".concat(e.DisplayTime),header:"".concat(e.Header),details:"".concat(e.Details)}}))}))).then((function(t){e.setState({contents:t,isLoading:!1})})).catch((function(t){return e.setState({errors:t,isLoading:!1})}))}},{key:"componentDidMount",value:function(){this.getLineData(),this.minuteCheck=setInterval(this.timeSyncData.bind(this),6e4),this.sleepIval=setInterval(this.sleepClock.bind(this),6e4)}},{key:"sleepClock",value:function(){this.idleCount++;var e=new Date;e.getDay()>=1?e.getHours()>=7&&e.getHours()<10?this.wakeUp():e.getHours()>=10&&e.getHours()<17?this.sleepReady=!0:e.getHours()>=17&&e.getHours()<19?this.wakeUp():e.getHours()>=19&&(this.sleepReady=!0):0===e.getDay()&&(this.sleepReady=!0),30===this.idleCount&&!1===this.runSleep&&!0===this.sleepReady&&(this.setState({sleepCheck:!0}),this.sleepIconTl=g.a.timeline({paused:!0,repeat:-1,repeatDelay:1}),this.sleepIconTl.from("#zzz-1",.7,{opacity:0,scale:.5,x:-10,y:10}).from("#zzz-2",.7,{opacity:0,scale:.5,x:-10,y:10},"+=0.2").from("#zzz-3",.7,{opacity:0,scale:.5,x:-10,y:10},"+=0.2"),this.sleepIconTl.restart(),this.runSleep=!0)}},{key:"timeSyncData",value:function(){var e=new Date;e.getDay()>=1?e.getHours()>=7&&e.getHours()<10?(this.getLineData(),this.refreshTime()):e.getHours()>=10&&e.getHours()<17||(e.getHours()>=17&&e.getHours()<19?(this.getLineData(),this.refreshTime()):e.getHours()):e.getDay()}},{key:"wakeUp",value:function(){this.setState({sleepCheck:this.prevState}),this.syncDataSleep(),this.runSleep=!1}},{key:"refreshBrowser",value:function(){window.location.reload(!1)}},{key:"componentWillUnmount",value:function(){clearInterval(this.minuteCheck),clearInterval(this.sleepIval)}},{key:"render",value:function(){var e=this.state,t=e.contents,a=e.isLoading,i=e.sleepCheck,n=this.refreshDate,r=!1;return t.filter((function(e){return r="undefined"===e.direction})),Object(s.jsxs)("div",{className:"ttable-dashboard-wrapper",children:[i?Object(s.jsxs)("div",{className:"ttable-error-modal-wrapper",id:"sleep-modal-wrapper",onClick:this.wakeUp,children:[Object(s.jsx)("div",{className:"ttable-error-modal-box sleep-mode-modal",children:Object(s.jsxs)("div",{className:"ttable-error-inner",children:[Object(s.jsx)("div",{className:"zzz",id:"zzz-3"}),Object(s.jsx)("div",{className:"zzz",id:"zzz-2"}),Object(s.jsx)("div",{className:"zzz",id:"zzz-1"}),Object(s.jsx)("div",{className:"ttable-error-icon sleep-mode-icon"}),Object(s.jsx)("h2",{className:"ttable-error-heading",children:"Sovl\xe4ge"}),Object(s.jsx)("p",{className:"ttable-error-log",children:"Tidtabellen har inte uppdaterats p\xe5 ett tag, peta p\xe5 sk\xe4rmen f\xf6r att uppdatera!"})]})}),Object(s.jsx)("div",{className:"ttable-error-black-overlay"})]}):null,O.a.isEmpty(t)?Object(s.jsxs)("div",{className:"ttable-error-modal-wrapper",onClick:this.refreshBrowser,children:[Object(s.jsx)("div",{className:"ttable-error-modal-box",children:Object(s.jsxs)("div",{className:"ttable-error-inner",children:[Object(s.jsx)("div",{className:"ttable-error-icon"}),Object(s.jsx)("h2",{className:"ttable-error-heading",children:"Choo-Choo! N\xe5got gick fel i h\xe4mtningen av data!"}),Object(s.jsx)("p",{className:"ttable-error-log",children:"SL API Error"})]})}),Object(s.jsx)("div",{className:"ttable-error-black-overlay"})]}):null,Object(s.jsx)("div",{id:"ttable-refresh",className:"ttable-refresh-icon",onClick:this.syncData}),a?Object(s.jsx)("div",{className:"ttable-loading-wrapper",children:Object(s.jsx)("p",{className:"ttable-loading-p",children:"H\xe4mtar data..."})}):Object(s.jsxs)(p.Grid,{className:"ttable-dashboard-grid",fluid:!0,children:[t.slice(0,2).map((function(e){var t=e.destination,a=e.arrival,i=e.direction,n=e.index;if(i>1)return Object(s.jsxs)(p.Row,{className:"ttable-dashboard-row ttable-incoming",children:[Object(s.jsxs)(p.Col,{className:"ttable-dashboard-col",xs:8,md:8,lg:8,children:[Object(s.jsx)("div",{className:"ttable-destination-icon dest-left"}),Object(s.jsx)("h3",{className:"ttable-direction",children:"T\xe5g mot T-centralen"}),Object(s.jsx)("h1",{className:"ttable-destination",children:t})]}),Object(s.jsx)(p.Col,{className:"ttable-dashboard-col ttable-right-info",xs:4,md:4,lg:4,children:Object(s.jsx)("h1",{className:"ttable-incoming-time",children:a})})]},n)})),t.slice(0,2).map((function(e){var t=e.destination,a=e.arrival,i=e.direction,n=e.index;if(i<2)return Object(s.jsxs)(p.Row,{className:"ttable-dashboard-row ttable-incoming",children:[Object(s.jsxs)(p.Col,{className:"ttable-dashboard-col",xs:8,md:8,lg:8,children:[Object(s.jsx)("h3",{className:"ttable-direction",children:"T\xe5g fr\xe5n T-centralen"}),Object(s.jsx)("div",{className:"ttable-destination-icon dest-right"}),Object(s.jsx)("h1",{className:"ttable-destination",children:t})]}),Object(s.jsx)(p.Col,{className:"ttable-dashboard-col ttable-right-info",xs:4,md:4,lg:4,children:Object(s.jsx)("h1",{className:"ttable-incoming-time",children:a})})]},n)})),Object(s.jsxs)(p.Row,{className:"ttable-dashboard-row ttable-upcoming",children:[Object(s.jsxs)(p.Col,{className:"ttable-dashboard-col ttable-upcoming-line line-1",xs:4,md:4,lg:4,children:[Object(s.jsxs)("div",{className:"ttable-dashboard-upcoming-heading-row",children:[Object(s.jsx)("div",{className:"ttable-destination-icon dest-left"}),Object(s.jsx)("h4",{className:"ttable-direction",children:"T\xe5g mot T-centralen"})]}),Object(s.jsx)("div",{className:"ttable-dashboard-upcoming-body",children:t.map((function(e){var t=e.destination,a=e.arrival,i=e.direction,n=e.index;if(i>1)return Object(s.jsxs)("div",{className:"ttable-dashboard-upcoming-row",children:[Object(s.jsxs)("div",{className:"ttable-dashboard-upcoming-col",children:[" ",Object(s.jsx)("h2",{children:t})]}),Object(s.jsx)("div",{className:"ttable-dashboard-upcoming-col",children:Object(s.jsx)("h2",{children:a})})]},n)}))})]}),Object(s.jsxs)(p.Col,{className:"ttable-dashboard-col ttable-upcoming-line line-2",xs:4,md:4,lg:4,children:[Object(s.jsxs)("div",{className:"ttable-dashboard-upcoming-heading-row",children:[Object(s.jsx)("h4",{className:"ttable-direction",children:"T\xe5g fr\xe5n T-centralen"}),Object(s.jsx)("div",{className:"ttable-destination-icon dest-right"})]}),Object(s.jsx)("div",{className:"ttable-dashboard-upcoming-body",children:t.map((function(e){var t=e.destination,a=e.arrival,i=e.direction,n=e.index;if(i<2)return Object(s.jsxs)("div",{className:"ttable-dashboard-upcoming-row",children:[Object(s.jsxs)("div",{className:"ttable-dashboard-upcoming-col",children:[" ",Object(s.jsx)("h2",{children:t})]}),Object(s.jsx)("div",{className:"ttable-dashboard-upcoming-col",children:Object(s.jsx)("h2",{children:a})})]},n)}))})]}),Object(s.jsxs)(p.Col,{className:"ttable-dashboard-col ttable-warnings",xs:!0,md:!0,lg:!0,children:[Object(s.jsx)("div",{className:"ttable-dashboard-warning-heading-row",children:Object(s.jsx)("h4",{className:"ttable-warning-heading",children:"Aktuella st\xf6rningar"})}),Object(s.jsxs)("div",{id:"ttable-warning-display-wrapper",children:[Object(s.jsx)("div",{className:"ttable-warning-display",id:"no-warn",children:Object(s.jsxs)("div",{className:"ttable-warn-displ-text",children:[Object(s.jsx)("p",{className:"ttable-warn-displ-h",children:"Inga st\xf6rningar just nu."}),Object(s.jsx)("p",{className:"ttable-warn-displ-sh",children:"Allt g\xe5r som p\xe5 r\xe4ls..."})]})}),r&&Object(s.jsx)("div",{className:"ttable-warning-display",id:"ongoing-warn",children:Object(s.jsx)("div",{className:"ttable-warn-displ-text",children:t.slice(-1).map((function(e){var t=e.details,a=e.index;return Object(s.jsxs)("div",{className:"ttable-warn-text-module",children:[Object(s.jsx)("div",{className:"ttable-warn-ongoing-icon"}),Object(s.jsx)("p",{className:"ttable-warn-ongoing-text",children:t})]},a)}))})})]}),Object(s.jsx)("div",{id:"ttable-refresh-info",className:"ttable-refresh-info",children:n})]})]})]})]})}}]),a}(i.Component));a(60);var N=function(){return Object(s.jsx)("div",{className:"ttable-app-wrapper",children:Object(s.jsx)(v,{})})},w=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,62)).then((function(t){var a=t.getCLS,s=t.getFID,i=t.getFCP,n=t.getLCP,r=t.getTTFB;a(e),s(e),i(e),n(e),r(e)}))};l.a.render(Object(s.jsx)(n.a.StrictMode,{children:Object(s.jsx)(N,{})}),document.getElementById("root")),w()}},[[61,1,2]]]);
//# sourceMappingURL=main.ab74865c.chunk.js.map